function previewSelection {
    directory=$1
    if [ ! -z  "$directory" ]; then
        if [ ! -d "$directory" ]; then
            # cat but with syntax highlighting
            bat --color=always "$directory"
        else
            # ls with colors and git-aware
            exa --color=always -l --git --git-ignore -h $directory
        fi
    fi
}

# Export the function
export -f previewSelection

function godir {
    directory=$(fd -E vendor -d 5 . ${HOME}/projects/ | fzf --color 16 --preview "previewSelection {}" --height 80%  )
    if [ ! -z  "$directory" ]; then
        if [ ! -d "$directory" ]; then
            # Its a file. cd to the directory.
            cd $(dirname "$directory")
        else
            # cd to the directory
            cd $directory
        fi
    fi
}
